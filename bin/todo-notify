#!/bin/bash
#      Author: https://github.com/mohabaks
# Description: A simple Todo List using notify-send

# Source term colors to use
#. $HOME/.colors/parser

# Specify the todo file to read from
# cli script to show/delete/add can be found
# https://github.com/mohabaks/dotfiles/tree/master/local/.local/bin/todo
todofile='/home/void/.todo'
image='/home/void/Pictures/todo2.png'
BMAGENTA='#458588'
RED='#cc241d'
title="<span foreground='$BMAGENTA' >  TODO Weekdays</span>" # notify title

# A function to read the todo file and nicely format the texts
prettyNotify(){
   summary=""         # initialize message summary
   summary_counter=0  # initialize number of todo list

   if [[ -s "$todofile" ]];then
           while IFS= read -r line
           do
                  (( summary_counter += 1 ))
                  # Create a message summary
                  summary="$summary\n<span foreground='$RED'>$summary_counter </span>$line"
           done < "$todofile"
   else
           summary="<span foreground='$RED'>ERROR: </span> Nothing to do... "
   fi
}

prettyNotify
notify-send -i $image "$title" "$summary"

#!/bin/mksh

if [ "$TERM" = "linux" ]; then
    echo -en "\e]P0222222" #black
    echo -en "\e]P8222222" #darkgrey
    echo -en "\e]P1803232" #darkred
    echo -en "\e]P9982b2b" #red
    echo -en "\e]P25b762f" #darkgreen
    echo -en "\e]PA89b83f" #green
    echo -en "\e]P3aa9943" #brown
    echo -en "\e]PBefef60" #yellow
    echo -en "\e]P4324c80" #darkblue
    echo -en "\e]PC2b4f98" #blue
    echo -en "\e]P5706c9a" #darkmagenta
    echo -en "\e]PD826ab1" #magenta
    echo -en "\e]P692b19e" #darkcyan
    echo -en "\e]PEa1cdcd" #cyan
    echo -en "\e]P7ffffff" #lightgrey
    echo -en "\e]PFdedede" #white
    clear #for background artifacting
fi
# Global variables ================{{{
export SHELL=/bin/mksh
export PAGER=less
export EDITOR=vim
export BROWSER=palemoon
export BROWSERCLI=w3m
export READER=zathura
export IMAGEVIEWER=sxiv
export VIDEOPLAYER=mpv
export PATH=$PATH:$HOME/bin:$HOME/bin/ascii:/opt/altera/12.1sp1/quartus/bin/:/opt/altera/10.1sp1/modelsim_ase/linuxaloem/
export NNN_BMS='gd:~/Documents;gD:~/Downloads/;gF:~/Documents/Faculdade/'
export NNN_FALLBACK_OPENER=xdg-open
# }}}
# mksh settings ==================={{{
set -o emacs
bind ^L=clear-screen
bind ^V=edit-line
bind ^K=up-history
bind ^J=down-history


# Will return the current branch name
# Usage example: git pull origin $(current_branch)
current_branch() {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || \
	ref=$(git rev-parse --short HEAD 2> /dev/null) || return
	echo ${ref#refs/heads/}
}

current_repository() {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || \
	ref=$(git rev-parse --short HEAD 2> /dev/null) || return
	echo $(git remote -v | cut -d':' -f 2)
}

#PS1=$'\e[01;36m${PWD/#$HOME/~}\e[01;31m\ ${?/#0/}\e[01;32m\n➜\e[0m\ '
#PS1=$'\e[01;36m${PWD/#$HOME/~}\e[01;37m\ on\e[01;35m\ \ue0a0 $(current_branch "q")\e[0m\n↳ '
#PS1=''$(print '\033[38;1;36m$(pwd | sed "s,^$HOME,~,")\033[00m')' '$(print '\033[38;1;35m$(current_branch)\033[00m')' '$(print '\033[38;1;32m\n➜ \033[00m')''
PS1='$(pwd | sed "s,^$HOME,~,") $(print "\033[0;36m$\033[00m") '

# History settings
HISTSIZE=5000
HISTFILESIZE=500
HISTFILE=~/.mksh_history

#}}}
# mksh especific functions ========{{{

'!!'() {
	echo "$(history -1 | grep -oP "(?<=\t).*$")"
	$(history -1 | grep -oP "(?<=\t).*$")
}

# }}}
# Souce files ====================={{{
source "$HOME/.vim/gruvbox_256palette.sh"
source $HOME/shell_aliases

export FZF_DEFAULT_COMMAND="find . -path '*/\.*' -type d -prune -o -type f -print -o -type l -print 2> /dev/null | sed s/^..//"
# }}}

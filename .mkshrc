#!/bin/mksh

# Global variables ================{{{
export SHELL=/bin/mksh
export PAGER=less
export EDITOR=vim
export BROWSER=palemoon
export BROWSERCLI=w3m
export READER=zathura
export IMAGEVIEWER=feh
export VIDEOPLAYER=mpv
export PATH=$PATH:$HOME/bin:$HOME/bin/ascii
export NNN_BMS='gd:~/Documents;gD:~/Downloads/;gF:~/Documents/Faculdade/'
export NNN_FALLBACK_OPENER=xdg-open
# }}}
# mksh settings ==================={{{
set -o vi
bind ^L=clear-screen
bind ^V=edit-line
bind ^K=up-history
bind ^J=down-history


# Will return the current branch name
# Usage example: git pull origin $(current_branch)
current_branch() {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || \
	ref=$(git rev-parse --short HEAD 2> /dev/null) || return
	echo ${ref#refs/heads/}
}

current_repository() {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || \
	ref=$(git rev-parse --short HEAD 2> /dev/null) || return
	echo $(git remote -v | cut -d':' -f 2)
}

#PS1=$'\e[01;36m${PWD/#$HOME/~}\e[01;31m\ ${?/#0/}\e[01;32m\n➜\e[0m\ '
#PS1=$'\e[01;36m${PWD/#$HOME/~}\e[01;37m\ on\e[01;35m\ \ue0a0 $(current_branch "q")\e[0m\n↳ '
#PS1=''$(print '\033[38;1;36m$(pwd | sed "s,^$HOME,~,")\033[00m')' '$(print '\033[38;1;35m$(current_branch)\033[00m')' '$(print '\033[38;1;32m\n➜ \033[00m')''
PS1='$(pwd | sed "s,^$HOME,~,") $(print "\033[0;36m$\033[00m") '

# History settings
HISTSIZE=2000
HISTFILESIZE=200
HISTFILE=~/.mksh_history

#}}}
# mksh especific functions ========{{{

'!!'() {
	echo "$(history -1 | grep -oP "(?<=\t).*$")"
	$(history -1 | grep -oP "(?<=\t).*$")
}

# }}}
# Souce files ====================={{{
source "$HOME/.vim/gruvbox_256palette.sh"
source $HOME/shell_aliases

export FZF_DEFAULT_COMMAND="find . -path '*/\.*' -type d -prune -o -type f -print -o -type l -print 2> /dev/null | sed s/^..//"
# }}}

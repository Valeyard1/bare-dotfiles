#!/bin/mksh

if [ "$TERM" = "linux" ]; then
    echo -en "\e]P02D333D" #nord background
    echo -en "\e]P82D333D" #darkgrey
    echo -en "\e]P1BF616A" #pink
    echo -en "\e]P9BF616A" #pink
    echo -en "\e]P281A1C1" #lightgreen
    echo -en "\e]PAA3BE8C" #green
    echo -en "\e]P3666666" #brown
    echo -en "\e]PBEBCB8B" #yellow
    echo -en "\e]P481A1C1" #darkblue
    echo -en "\e]PC81A1C1" #blue
    echo -en "\e]P5706c9a" #darkmagenta
    echo -en "\e]PD826ab1" #magenta
    echo -en "\e]P688C0D0" #darkcyan
    echo -en "\e]PED8DEE9" #cyan
    echo -en "\e]P7D8DEE9" #lightgrey
    echo -en "\e]PFD8DEE9" #white
    clear #for background artifacting
fi
# Global variables ================{{{
export SHELL=/bin/mksh
export PAGER=less
export EDITOR=vim
export BROWSER=palemoon
export BROWSERCLI=w3m
export READER=zathura
export IMAGEVIEWER=sxiv
export VIDEOPLAYER=mpv
export PATH=$PATH:$HOME/bin:$HOME/bin/ascii:/opt/altera/12.1sp1/quartus/bin/:/opt/altera/10.1sp1/modelsim_ase/linuxaloem/
export NNN_BMS='gd:~/Documents;gD:~/Downloads/;gF:~/Documents/Faculdade/'
export NNN_FALLBACK_OPENER=xdg-open
# }}}
# mksh settings ==================={{{
set -o emacs
bind ^L=clear-screen
bind ^V=edit-line
bind ^K=up-history
bind ^J=down-history


# Will return the current branch name
# Usage example: git pull origin $(current_branch)
current_branch() {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || \
	ref=$(git rev-parse --short HEAD 2> /dev/null) || return
	echo ${ref#refs/heads/}
}

current_repository() {
	ref=$(git symbolic-ref HEAD 2> /dev/null) || \
	ref=$(git rev-parse --short HEAD 2> /dev/null) || return
	echo $(git remote -v | cut -d':' -f 2)
}

#PS1=$'\e[01;36m${PWD/#$HOME/~}\e[01;31m\ ${?/#0/}\e[01;32m\n➜\e[0m\ '
#PS1=$'\e[01;36m${PWD/#$HOME/~}\e[01;37m\ on\e[01;35m\ \ue0a0 $(current_branch "q")\e[0m\n↳ '
#PS1=''$(print '\033[38;1;36m$(pwd | sed "s,^$HOME,~,")\033[00m')' '$(print '\033[38;1;35m$(current_branch)\033[00m')' '$(print '\033[38;1;32m\n➜ \033[00m')''
PS1='$(pwd | sed "s,^$HOME,~,") $(print "\033[0;36m$\033[00m") '

# History settings
HISTSIZE=5000
HISTFILESIZE=500
HISTFILE=~/.mksh_history

#}}}
# mksh especific functions ========{{{

'!!'() {
	echo "$(history -1 | grep -oP "(?<=\t).*$")"
	$(history -1 | grep -oP "(?<=\t).*$")
}

# }}}
# Source files ====================={{{
source "$HOME/.vim/gruvbox_256palette.sh"
source $HOME/.aliases
# }}}

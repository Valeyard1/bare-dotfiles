# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# Variables ======================={{{

set $term st
set $shutdown sudo shutdown -h now
set $reboot sudo reboot

# }}}
# Exec on start ==================={{{

exec_always xrdb ~/.Xresources
#exec xmodmap ~/.Xmodmap
exec xset +fp $HOME/var/share/fonts
#exec --no-startup-id redshift &
#exec --no-startup-id $HOME/bin/polybar_launch
#exec --no-startup-id $HOME/bin/bar
#exec $term -e tmux new -s main
#exec xrate r rate 200 30
#exec_always hsetroot -fill ~/Pictures/Landscapes/river-forest.jpg
#exec_always $HOME/bin/todo-notify

# }}}
# General settings ================{{{

#Needed for i3-gaps
for_window [class="^.*"] border pixel 0
gaps inner 10
gaps outer 25

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#font pango:curie 7

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# focus the parent container
#bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

## Manual management of external displays
# Set the shortcuts and what they do
set $mode_display Ext Screen (v) VGA ON, (h) HDMI ON, (x) VGA OFF, (y) HDMI OFF
mode "$mode_display" {
    bindsym v exec --no-startup-id xrandr --output VGA-0 --auto --right-of LVDS, mode "default"
    bindsym h exec --no-startup-id xrandr --output HDMI-0 --auto --right-of LVDS, mode "default"
    bindsym x exec --no-startup-id xrandr --output VGA-0 --auto --off, mode "default"
    bindsym y exec --no-startup-id xrandr --output HDMI-0 --auto --off, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# Declare here the shortcut to bring the display selection menu
bindsym $mod+e mode "$mode_display"

# }}}
# Workspace settings =============={{{
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1  workspace $ws1
bindsym $mod+2  workspace $ws2
bindsym $mod+3  workspace $ws3
bindsym $mod+4  workspace $ws4
bindsym $mod+5  workspace $ws5
bindsym $mod+6  workspace $ws6
bindsym $mod+7  workspace $ws7
bindsym $mod+8  workspace $ws8
bindsym $mod+9  workspace $ws9
bindsym $mod+0  workspace $ws10

# move focused container to workspace
bindsym $mod+Shift+1  move container to workspace $ws1
bindsym $mod+Shift+2  move container to workspace $ws2
bindsym $mod+Shift+3  move container to workspace $ws3
bindsym $mod+Shift+4  move container to workspace $ws4
bindsym $mod+Shift+5  move container to workspace $ws5
bindsym $mod+Shift+6  move container to workspace $ws6
bindsym $mod+Shift+7  move container to workspace $ws7
bindsym $mod+Shift+8  move container to workspace $ws8
bindsym $mod+Shift+9  move container to workspace $ws9
bindsym $mod+Shift+0  move container to workspace $ws10

for_window [class="weechat" instance="weechat"] move workspace $ws7
for_window [class="TelegramDesktop"] move workspace $ws6
#assign [class="mpv"] $ws5
for_window [class="ranger" instance="ranger"] move workspace $ws4
for_window [class="neomutt" instance="neomutt"] move workspace $ws5

for_window [instance="math" class="math"] floating enable, resize set 800 300, move scratchpad
#exec --no-startup-id $term -n math -c math -f "Monaco:size=14" -e bc -q -l

for_window [instance="dropdown" class="dropdown"] floating enable , resize set 625 400 , move scratchpad
# Runs the tmuxinit script, which searches for an earlier tmux instance,
# otherwise starts a new one (to prevent multiple dropdown sessions).
#exec --no-startup-id $term -n dropdown -c dropdown -e tmux new-session -s dropdown

for_window [class="Firefox"] move workspace $ws2
for_window [title="GIMP Startup"] move workspace $ws5
for_window [class="Gimp"] move workspace $ws5
for_window [window_role="gimp-dock"] floating disable; move left; resize shrink width 50 px or 50ppt
for_window [window_role="gimp-toolbox"] floating disable; move right; resize grow width 30 px or 30ppt
#for_window [class="mpv"] floating enable, resize set 500 200, sticky enable
#for_window [title="st|tmux"] border pixel 4
#for_window [title="Spotify"] floating enable, sticky enable
for_window [class="Sxiv"] floating enable

hide_edge_borders both

set $bg-color 	         #282828
set $inactive-bg-color   #504945
set $text-color          #ebdbb2
set $inactive-text-color #a89984
set $urgent-bg-color     #fbf1c7
set $urgent-text-color   #282828
set $blue				 #458588

# window colors
#                       border              background         text                 indicator
client.focused          $bg-color		    #CBCCCD	           $text-color          #CBCCCD
client.unfocused        $bg-color			#798185			   $inactive-text-color #282828
client.focused_inactive $bg-color		  	$inactive-bg-color $inactive-text-color #282828
client.urgent           $bg-color		    $urgent-bg-color   $urgent-text-color   #282828

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    status_command i3status
	position bottom
    font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
}

# }}}
# Keybindings ====================={{{

# Ref: https://faq.i3wm.org/question/3747/enabling-multimedia-keys/?answer=3759#post-id-3759
# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -q sset Master 5%+ #increase sound volume
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -q sset Master 5%- #decrease sound volume
bindsym XF86AudioMute exec --no-startup-id amixer -q set Master toggle # mute sound

# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness

# Media player controls
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# start a terminal
bindsym $mod+Return exec $term
bindsym $mod+Shift+Return exec $term -e tmux

#bindsym $mod+BackSpace
bindsym $mod+Shift+BackSpace	exec $HOME/bin/prompt "Are you sure you want to reboot?" "$reboot"

# change focus between tiling / floating windows
bindsym $mod+space		focus mode_toggle
# toggle tiling / floating
bindsym $mod+Shift+space 	floating toggle

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Go to last visited workspace
bindsym $mod+Tab		workspace back_and_forth

# split in vertical orientation
bindsym $mod+shift+slash split v ; exec notify-send "Tile vertical"
# split in horizontal orientation
bindsym $mod+slash split h ; exec notify-send "Tile horizontal"

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+F1 layout stacking
bindsym $mod+F2 layout tabbed
bindsym $mod+F3 layout toggle split
bindsym $mod+F5 restart
bindsym $mod+F6 exec --no-startup-id displayselect

# Go to workspaces with Super+[ and Super+]
bindsym $mod+bracketleft workspace prev
bindsym $mod+bracketright workspace next

# Go to workspaces with PageUp/PageDown
bindsym $mod+Prior			workspace prev
bindsym $mod+Shift+Prior	move container to workspace prev
bindsym $mod+Next			workspace next
bindsym $mod+Shift+Next		move container to workspace next

#bindsym $mod+Escape		workspace prev
bindsym $mod+Shift+Escape 	exec i3-msg exit

bindsym $mod+F9		exec --no-startup-id sudo dmenumount
bindsym $mod+F10	exec --no-startup-id sudo dmenuumount
# }}}
# Letter keybindings =============={{{

# screenshots
bindsym $mod+Print					exec scrot -e 'mv $f ~/Pictures/scrot' && sleep 1 && exec notify-send 'screenshot has been saved in ~/Pictures/scrot'
bindsym --release $mod+Shift+Print  exec scrot -se 'mv $f ~/Pictures/scrot/' && sleep 1 && exec notify-send 'screenshot has been saved in ~/Pictures/scrot'

bindsym --release $mod+s			exec maim | xclip -selection clipboard -t image/png
bindsym --release $mod+shift+s		exec maim -us | xclip -selection clipboard -t image/png

# Scratchpad windows
bindsym $mod+a						[instance="math" class="math"] scratchpad show, [instance="math" class="math"] move position center
#bindsym $mod+shift+a				exec cmusart

# Open the default browser
#bindsym $mod+b
bindsym $mod+shift+b				exec --no-startup-id $BROWSER

# Reload config
bindsym $mod+c						exec cmus-status
bindsym $mod+Shift+c				reload

# start rofi/dmenu (a program launcher)
bindsym $mod+d						exec dmenu_run -i -fn 'iosevka Nerd Font:size=11' -p ' Search  ' -nb '#2f343f' -nf '#e7e8eb' -sb '#81A1C1' -sf '#2f343f'
#bindsym $mod+d						exec rofi -show combi

# Exit i3
bindsym $mod+Shift+e				exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# reload the configuration file
bindsym $mod+n						exec $term -n neomutt -c neomutt -e neomutt
bindsym $mod+Shift+n				exec $term -n newsboat -c newsboat -e newsboat

# kill focused window
bindsym $mod+q kill
bindsym $mod+Shift+q kill

# Start weechat
bindsym $mod+w						exec $term -n weechat -c weechat -e weechat-curses
bindsym $mod+shift+w                exec $HOME/bin/dmoji

# Start ranger
bindsym $mod+r						exec $term -n ranger -c ranger -e ranger
bindsym $mod+Shift+r				exec $term -n ranger -c ranger -e sudo ranger
bindsym Mod1+r                      exec $HOME/bin/record-slop
bindsym Mod1+Shift+r                exec killall ffmpeg && exec notify-send "FFmpeg" "Gravação da tela finalizada!"

# Set the default gaps / Open Telegram
bindsym $mod+t						split toggle
bindsym $mod+shift+t				exec Telegram

bindsym $mod+u						[instance="dropdown" class="dropdown"] scratchpad show, [instance="dropdown" class="dropdown"] move position center
#bindsym $mod+shift+u				gaps inner all set 10; gaps outer all set 10

# Start i3lock
bindsym $mod+x						exec $truemute ;exec $HOME/.config/i3/locki3.sh
bindsym $mod+shift+x				exec prompt "Are you sure you want to shutdown?" "sudo poweroff -h now"

# Change gaps
bindsym $mod+g						gaps inner current plus 5
bindsym $mod+shift+g				gaps inner current minus 5
bindsym $mod+z						gaps outer current plus 5
bindsym $mod+Shift+z				gaps outer current minus 5

# Set i3 with no gaps
bindsym $mod+Shift+d				gaps inner current set 0; gaps outer current set 0

# enter fullscreen mode for the focused container
bindsym $mod+f						fullscreen toggle
bindsym $mod+shift+f				gaps inner all set 10; gaps outer all set 25

# Call vim-anywhere
bindsym Mod1+v exec ~/.vim-anywhere/bin/run

# change focus
bindsym $mod+h						focus left
bindsym $mod+j						focus down
bindsym $mod+k						focus up
bindsym $mod+l						focus right

# Swap windows positions
bindsym $mod+Shift+h				move left 30
bindsym $mod+Shift+j				move down 30
bindsym $mod+Shift+k				move up 30
bindsym $mod+Shift+l				move right 30

# Custom binding to resize windows (the original is too bad)
bindsym $mod+Shift+y				resize shrink width 10 px or 10ppt
bindsym $mod+Shift+u				resize shrink height 10 px or 10 ppt
bindsym $mod+Shift+i				resize grow height 10 px or 10 ppt
bindsym $mod+Shift+o				resize grow width 10 px or 10 ppt

# }}}
# Media ==========================={{{1

#For spotify
#set $music spotify
#set $pause dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause
#set $trupause dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Pause
#set $play dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Play
#set $next dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next
#set $prev dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous
#set $lilfor dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Seek
#set $bigfor dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Seek(

# For cmus
set $music "$term tmux new-window -t dropdown && tmux send-keys -t dropdown cmus 'Enter'"
set $next cmus-remote --next && pkill dunst ; exec cmus-status
set $play cmus-remote --play
set $prev cmus-remote --prev && pkill dunst ; exec cmus-status
set $pause cmus-remote --pause
set $truepause cmus-remote --stop

# For Alsa/Amixer
set $inc --no-startup-id amixer sset Master 2%+
set $biginc --no-startup-id amixer sset Master 5%+
set $dec --no-startup-id amixer sset Master 2%-
set $bigdec --no-startup-id amixer sset Master 5%-
set $mute --no-startup-id amixer sset Master toggle
set $truemute --no-startup-id amixer sset Master mute

# Media keys
bindsym $mod+F8 			exec $mute
bindsym $mod+m				exec $music
bindsym $mod+shift+m		exec tmux split-window -t dropdown -v && tmux send-keys -t dropdown 'cmus-lyrics | less' 'Enter'
bindsym $mod+p				exec $play
bindsym $mod+shift+p		exec $pause
bindsym $mod+plus			exec $inc
bindsym $mod+Shift+plus		exec $biginc
bindsym $mod+minus			exec $dec
bindsym $mod+Shift+minus	exec $bigdec
bindsym $mod+less			exec $prev
bindsym $mod+Shift+less		exec $beg
bindsym $mod+greater		exec $next
bindsym $mod+Shift+greater	exec $next
bindsym $mod+Shift+Delete	exec $truemute ; exec $truepause ; workspace '' ; exec $term -e zathura vim ~/.vimrc ; exec $term -e ranger

# }}}
